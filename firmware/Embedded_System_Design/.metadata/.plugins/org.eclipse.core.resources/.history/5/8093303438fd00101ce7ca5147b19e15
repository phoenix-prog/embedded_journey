#include "stm32f446xx.h"

void delay(volatile uint32_t count) {
    while(count--) {
        __NOP();
    }
}

int main(void) {
    // 1. Enable GPIOA clock
    RCC->AHB1ENR |= RCC_AHB1ENR_GPIOAEN;

    // 2. Configure PA5
    // Clear MODER5 bits (bits 10-11)
    GPIOA->MODER &= ~(GPIO_MODER_MODER5_Msk);
    // Set MODER5 to 01 (General purpose output mode)
    GPIOA->MODER |= (1 << GPIO_MODER_MODER5_Pos);

    // 3. (Optional but good practice) Set Speed to Low
    GPIOA->OSPEEDR &= ~(GPIO_OSPEEDR_OSPEEDR5_Msk);

    while (1) {
        // SET PA5 high
        GPIOA->BSRR = GPIO_BSRR_BS5;
        delay(500000);

        // RESET PA5 low
        GPIOA->BSRR = GPIO_BSRR_BR5;
        delay(500000);
    }
}






