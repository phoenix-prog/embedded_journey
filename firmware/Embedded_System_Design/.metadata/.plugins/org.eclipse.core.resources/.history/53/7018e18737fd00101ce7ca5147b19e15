#include "stm32f4xx.h"


// Simple delay function (not time-accurate, but works for testing)
void delay(volatile uint32_t count) {
    while(count--) {
        __NOP(); // Assembly "No Operation" instruction
    }
}

int main(void) {
    /* 1. Enable the clock for GPIOA */
    // AHB1ENR is the register; GPIOAEN is the bitmask for Pin 0
    RCC->AHB1ENR |= RCC_AHB1ENR_GPIOAEN;

    /* 2. Configure PA5 as Output */
    // Reset the 2 bits for Pin 5 (bits 10 and 11)
    GPIOA->MODER &= ~(GPIO_MODER_MODER5_Msk);
    // Set bit 10 to '1' (01 = General Purpose Output)
    GPIOA->MODER |= (1 << GPIO_MODER_MODER5_Pos);

    while (1) {
        /* 3. Toggle the LED */
        // XOR the 5th bit of the Output Data Register
        GPIOA->ODR ^= GPIO_ODR_OD5;

        delay(100000);
    }
}

